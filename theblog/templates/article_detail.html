{% extends 'base.html' %}

{% block title %}{{ object.title }}{% endblock %}

{% block content %}
<h1>{{ object.title }}</h1>
<small>By: {{ object.author.first_name }} {{ object.author.last_name }}</small>

{% if user.is_authenticated %}
  <small>
    <a href="{% url 'update_post' object.pk %}">(Edit)</a>
    <a href="{% url 'delete_post' object.pk %}">(Delete)</a>
  </small>
{% endif %}

<hr><br/>

{% if object.image %}
  <img src="{{ object.image.url }}" alt="Image for {{ object.title }}" style="max-width:100%; height:auto; margin-bottom: 20px;">
{% endif %}

<p>{{ object.body }}</p>

<br/>
<a href="{% url 'home' %}" class="btn btn-success">Back</a>

<form action="{% url 'like_post' object.pk %}" method="POST">
  {% csrf_token %}
  {% if user in object.likes.all %}
    <button type="submit">üíî Unlike</button>
  {% else %}
    <button type="submit">‚ù§Ô∏è Like</button>
  {% endif %}
</form>

<p>{{ object.total_likes }} Likes</p>

<hr>

<h2>Comments</h2>
{% for comment in comments %}
  <p><strong>{{ comment.user.username }}:</strong> {{ comment.body }}</p>
{% empty %}
  <p>There is no comments yet.</p>
{% endfor %}

<hr>

<h3>Add your comment</h3>
<form method="post">
  {% csrf_token %}
  {{ form.as_p }}
  <button type="submit">Send</button>
</form>

<!-- share buttons -->
<div class="mt-3">
  <div class="d-flex align-items-center">
    <span class="me-2 fw-bold text-secondary">Share:</span>

    
    <a href="https://www.facebook.com/sharer/sharer.php?u={{ request.build_absolute_uri }}"
       target="_blank"
       class="btn btn-outline-primary btn-sm me-2">
      <i class="bi bi-facebook"></i> Facebook
    </a>

    
    <a href="https://twitter.com/intent/tweet?url={{ request.build_absolute_uri }}&text={{ post.title }}"
       target="_blank"
       class="btn btn-outline-info btn-sm me-2">
      <i class="bi bi-twitter-x"></i> X
    </a>

    
    <a href="https://www.linkedin.com/shareArticle?url={{ request.build_absolute_uri }}&title={{ post.title }}"
       target="_blank"
       class="btn btn-outline-secondary btn-sm">
      <i class="bi bi-linkedin"></i> LinkedIn
    </a>
  </div>
</div>
{% endblock %}
