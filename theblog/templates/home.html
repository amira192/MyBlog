{% extends 'base.html' %}

{% block content %}
<h1>Blog Posts</h1>

<style>
  .posts-container {
    column-count: 3;
    column-gap: 1rem;
  }
  .post-card {
    background: #f8f9fa;
    margin-bottom: 1rem;
    display: inline-block;
    width: 100%;
    break-inside: avoid;
    padding: 15px;
    border-radius: 6px;
    box-shadow: 0 1px 3px rgb(0 0 0 / 0.1);
  }
  .post-card img {
    max-width: 100%;
    height: auto;
    border-radius: 4px;
    margin-bottom: 10px;
  }
  .post-title {
    font-size: 1.25rem;
    margin-bottom: 0.5rem;
  }
  .read-more-btn {
    margin-top: 8px;
  }
  .author-name {
    font-style: italic;
    color: #555;
    font-size: 0.9rem;
    margin-bottom: 10px;
    display: block;
  }
</style>

<div class="posts-container">
  {% for post in posts %}
    <div class="post-card">
      {% if post.image %}
        <img src="{{ post.image.url }}" alt="Image for {{ post.title }}">
      {% endif %}
      <h3 class="post-title">
        <a href="{% url 'article_detail' post.pk %}">{{ post.title }}</a>
      </h3>
      <span class="author-name">By: {{ post.author.first_name }} {{ post.author.last_name }} - 
        {% if user.is_authenticated and user == post.author %}
          <small>
            <a href="{% url 'update_post' post.pk %}">(Edit)</a>
            <a href="{% url 'delete_post' post.pk %}">(Delete)</a>
          </small>
        {% endif %}
      <p>{{ post.body|truncatechars:150 }}</p>- <p class="text-muted">Published on: {{ post.date|date:"Y-m-d H:i" }}</p>
      <a href="{% url 'article_detail' post.pk %}" class="btn btn-primary read-more-btn">Read more</a>
    </div>
  {% empty %}
    <p>No blog posts found.</p>
  {% endfor %}
</div>

{% endblock %}
